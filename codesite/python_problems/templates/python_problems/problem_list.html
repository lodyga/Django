{% extends "core/base.html" %}
{% block title %}
  Python
{% endblock title %}
{% block content %}
  {% comment %}  {% load static %}
  <link rel="stylesheet" href="{% static 'python_problems/style.css' %}">{% endcomment %}
  <div class="container-fluid m-2">
    <div class="row">
      <div class="col-md-2">
        <a href="/" class="btn btn-secondary px-3 py-0 mb-5">Back</a>
        <form method="get" action="{% url 'python_problems:index' %}">
          <div class="input-group mb-5">
            <input name="query"
                   class="px-2 py-2 mb-2"
                   type="text"
                   value="{{ query }}"
                   placeholder="Search by tag or title">
            <button class="btn btn-primary mb-2 px-2" type="submit">Search</button>
            {% if difficulty_id %}<input type="hidden" name="difficulty" value="{{ difficulty_id }}">{% endif %}
          </div>
        </form>
        <strong>Difficulty</strong>
        <ul>
          {% for difficulty in difficulty_list %}
            <li class="py-1 px-2 {% if difficulty.id == difficulty_id %}text-warning{% endif %}">
              <a href="{% url 'python_problems:index' %}?query={{ query }}&difficulty={{ difficulty.id }}"
                 class="btn btn-secondary py-0 {% if difficulty.id == difficulty_id %}text-warning{% endif %}">{{ difficulty.name }}</a>
            </li>
          {% endfor %}
        </ul>
        <a class="btn btn-warning mb-2 mt-2 p-1"
           href="{% url 'python_problems:index' %}"
           role="button">Clear filters</a>
      </div>
      <div class="col-md-8">
        <div class="mb-5 mt-5">
          <h2>Python problems list</h2>
        </div>
        {% if problem_list %}
          <ul>
            {% for problem in problem_list %}
              <li>
                <div {color: green} class="problem-container flex ">
                  <a href="{% url 'python_problems:detail' problem.id %}">{{ problem.title }}</a>,
                  (<a href="{% url 'python_problems:problem-update' problem.id %}">Update</a> |
                  <a href="{% url 'python_problems:problem-delete' problem.id %}">Delete</a>)
                  {% comment %}<a href="{% url 'python_problems:detail' problem.id %}" class="tags" style="display: none">, ({{ problem.tags.all|join:', ' }})</a>{% endcomment %}
                  {% for tag in problem.tags.all %}
                    <a href="{% url 'python_problems:index' %}?query={{ tag }}"
                       class="tags"
                       style="display: none">, {{ tag }}</a>
                  {% endfor %}
                </div>
                <hr>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No python problems available.</p>
        {% endif %}
      </div>
      <div class="col-md-2">
        <div class="row">
          <div>
            <button onclick="toggleTags()" class="btn-secondary ms-0 mb-3">Show Tags</button>
          </div>
        </div>
        <div class="row">
          <div>
            <a href="create/">Create a problem</a> |
            <a href="tag/">Tag list</a> |
            <a href="tag/create/">Add a tag</a>
          </div>
        </div>
      </div>
    </div>
    <script>
  function toggleTags() {
    var tags = document.querySelectorAll(".tags");
    for (var i = 0; i < tags.length; i++) {
      if (tags[i].style.display === "none") {
        tags[i].style.display = "block";
      } else {
        tags[i].style.display = "none";
      }
    }
  }
    </script>
  {% endblock content %}
