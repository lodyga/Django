{% extends "core/base.html" %}
{% block title %}
Python
{% endblock title %}
{% block content %}
{% comment %} {% load static %}
<link rel="stylesheet" href="{% static 'python_problems/style.css' %}"> {% endcomment %}
  <div class="container-fluid m-2">
    <div class="row">
      <div class="col-md-2">
        <div class="col sticky-top">
          <div class="row">
            <div>
              <a href="{% url 'python_problems:index' %}"
                 class="btn btn-secondary px-3 py-0 mb-2">Back</a>
            </div>
          </div>
          <div class="row">
            <div>
              <button type="button"
                      class="btn btn-primary px-3 py-1 mb-2"
                      data-bs-toggle="collapse"
                      data-bs-target="#related">Show related problems</button>
              <div id="related" class="collapse">
                <p>
                  <b>Related Problems</b>:
                </p>
                <div class="box">
                  <ul>
                    {% for related in related_problems %}
                      <li>
                        <a href="{% url 'python_problems:detail' related.id %}">
                          {% if related.title|length > 30 %}
                            {{ related.title|slice:":27" }} ...
                          {% else %}
                            {{ related.title }}
                          {% endif %}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="container">
          <div class="row">
            <div class="col-auto mb-5 mt-5">
              <h1>{{ problem.title }}</h1>
              <hr>
            </div>
            <div class="row">
              <div class="col-auto mb-2">
                <p>
                  <b>Difficulty</b>:
                  <p>{{ problem.difficulty }}</p>
                </p>
              </div>
              <div class="col-auto mb-2">
                <p>
                  <b>Tags</b>:
                  {% comment %}<p>{{ tags|join:", " }}</p>{% endcomment %}
                  <p>
                    {% for tag in tags %}
                      <a href="{% url 'python_problems:index' %}?query={{ tag }}">{{ tag }}</a>
                      {% if not forloop.last %},{% endif %}
                    {% endfor %}
                  </p>
                </p>
              </div>
              <div class="col-auto mb-2">
                <p>
                  <b>Complexity</b>:
                </p>
                {% comment %}<a href="{{ problem.time_complexity }}">Time {{ problem.time_complexity }}</a>
                <a href="{{ problem.space_complexity }}">Space: {{ problem.space_complexity }}</a>{% endcomment %}
                <p>Time: {{ problem.time_complexity }}, Space: {{ problem.space_complexity }}</p>
              </div>
              <div class="col-auto mb-2">
                <p>
                  <b>URL</b>:
                </p>
                <a href="{{ problem.url }}">{{ problem.url|slice:"8:20" }}</a>
              </div>
            </div>
          </div>
          <hr>
          <p>
            <b>Problem description</b>:
          </p>
          <pre style="white-space: pre-wrap">{{ problem.description }}</pre>
          <br>
          <hr>





          
          
          
          

<form action="#" class="text-primary">
  <pre>
# Write in Code Area.
# Remember to pass a solution to an <strong class="text-danger">ouput</strong>.

def fun(x):
    return x
    <strong class="text-danger">ouput</strong> = fun(1)
    
  </pre></form>

  
 <form id="id_code_form" action="{% url 'python_problems:detail' problem.id %}" method="POST" class="mb-5">
   {% csrf_token %}
  <div class="code-area-container mb-2 border border-primary">
    <label for="id_code_area">Code Area</label>
    <textarea name="code_area" id="id_code_area" cols="80" rows="10" class="python-code  border border-primary">{{ code_text }}</textarea>
  </div>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/codemirror.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.62.0/theme/monokai.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/mode/python/python.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        var storedDarkMode = localStorage.getItem('darkMode');
        var theme = storedDarkMode === "enabled" ? "monokai" : "default";
        var editor = CodeMirror.fromTextArea(document.getElementById("id_code_area"), {
            mode: "python",
            theme: theme,
            lineNumbers: true, // Enable line numbers
            autofocus: true, // Automatically focus on the editor
            placeholder: "Enter your Python code here..." // Placeholder text
        });
    });
</script>
<button id="submitButton" type="submit" class="btn btn-warning ">
    <span id="spinner" class="spinner-border spinner-border-sm d-none"></span>
    Run
</button>
</form>
<script>
document.getElementById('id_code_form').addEventListener('submit', function () {
    document.getElementById('submitButton').disabled = true; // Disable the submit button
    document.getElementById('spinner').classList.remove('d-none'); // Show the spinner
    document.getElementById('submitButton').innerHTML = '<span class="spinner-border spinner-border-sm"></span> Running';
});
</script>

  {% comment %}   
Code without theme sync, spinner and timeout
<button id="submitButton" type="submit" class="btn btn-warning">
    Run
  </button>
</form>

<script>
  // Function to initialize CodeMirror
  function initializeCodeMirror() {
    var editor = CodeMirror.fromTextArea(document.getElementById("id_code_area"), {
      mode: "python",
      lineNumbers: true,
      autofocus: true,
    });

    // Hide the original textarea after CodeMirror initialization
    // document.getElementById("id_code_area").style.display = "none";
  }

  // Initialize CodeMirror when DOM content is loaded
  document.addEventListener("DOMContentLoaded", function() {
    initializeCodeMirror();
  });
</script>
 {% endcomment %}





          {% load crispy_forms_tags %}
          <form action="" class="mb-3">
            {{ output_form|crispy }}
          </form>


          

          {% comment %} <pre>{{ processed_code }}</pre> {% endcomment %}
          <br>
          <hr>
          <p>
            <b>Test Cases</b>:
          </p>
          <pre>{{ problem.testcase }}</pre>
          <br>
          <hr>
          <button type="button"
                  class="btn btn-primary mb-2"
                  data-bs-toggle="collapse"
                  data-bs-target="#solution">Show solution</button>
          <div id="solution" class="collapse">
            <p>
              <b>Solution</b>:
            </p>
            <div class="box">
              <pre>{{ problem.solution }}</pre>
            </div>
          </div>
          <br>
          <hr>
        </div>
      </div>
      <div class="col-md-2">
        <div class="row"></div>
        <div class="row">
          <div>
            <a href="{% url 'python_problems:index' %}"
               class="btn btn-secondary px-3 py-1 mb-2">Back</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  
{% endblock content %}
